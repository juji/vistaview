---
title: Svelte
description: Using VistaView with Svelte
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

VistaView provides Svelte hooks and actions for seamless integration.

## Installation

```bash
npm install vistaview
```

## API

### `useVistaView` Hook

For imperative control without rendering a container:

```ts
import { useVistaView } from 'vistaview/svelte';
import type { VistaInterface } from 'vistaview';
```

### `createVistaView` Action

A Svelte action for use with the `use:` directive:

```ts
import { createVistaView } from 'vistaview/svelte';
```

## Basic Usage

### Using the Hook

```svelte
<script lang="ts">
  import { useVistaView } from 'vistaview/svelte';
  import 'vistaview/style.css';

  const { open, close, next, prev } = useVistaView({
    elements: '#gallery a',
  });
</script>

<div id="gallery">
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="/images/photo2-full.jpg">
    <img src="/images/photo2-thumb.jpg" alt="Photo 2" />
  </a>
  <button on:click={() => open(0)}>Open Gallery</button>
</div>
```

### Using the Action (Recommended)

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import 'vistaview/style.css';
</script>

<div use:createVistaView={{ selector: '> a' }}>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="/images/photo2-full.jpg">
    <img src="/images/photo2-thumb.jpg" alt="Photo 2" />
  </a>
</div>
```

## Advanced Examples

### With Ref for Imperative Control

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import type { VistaInterface } from 'vistaview';
  import 'vistaview/style.css';

  let vista: VistaInterface;

  const openGallery = () => {
    vista?.open(0);
  };

  const nextImage = () => {
    vista?.next();
  };
</script>

<div use:createVistaView={{ selector: '> a', ref: vista }}>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="/images/photo2-full.jpg">
    <img src="/images/photo2-thumb.jpg" alt="Photo 2" />
  </a>
</div>

<button on:click={openGallery}>Open Gallery</button>
<button on:click={nextImage}>Next Image</button>
```

### With Extensions

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import { download } from 'vistaview/extensions/download';
  import { youtubeVideo } from 'vistaview/extensions/youtube-video';
  import 'vistaview/style.css';

  const options = {
    selector: '> a',
    extensions: [download(), youtubeVideo()],
    controls: {
      topLeft: ['indexDisplay'],
      topRight: ['download', 'zoomIn', 'zoomOut', 'close'],
      bottomLeft: ['description'],
    },
  };
</script>

<div use:createVistaView={options}>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" data-vistaview-alt="Rick Astley">
    <img src="/images/video-thumb.jpg" alt="Video" />
  </a>
</div>
```

### Dynamic Content with #each

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import 'vistaview/style.css';

  interface Photo {
    id: number;
    full: string;
    thumb: string;
    alt: string;
  }

  let photos: Photo[] = [
    { id: 1, full: '/photo1-full.jpg', thumb: '/photo1-thumb.jpg', alt: 'Photo 1' },
    { id: 2, full: '/photo2-full.jpg', thumb: '/photo2-thumb.jpg', alt: 'Photo 2' },
  ];

  function addPhoto() {
    const newId = photos.length + 1;
    photos = [
      ...photos,
      {
        id: newId,
        full: `/photo${newId}-full.jpg`,
        thumb: `/photo${newId}-thumb.jpg`,
        alt: `Photo ${newId}`,
      },
    ];
  }
</script>

<div use:createVistaView={{ selector: '> a' }}>
  {#each photos as photo (photo.id)}
    <a href={photo.full}>
      <img src={photo.thumb} alt={photo.alt} />
    </a>
  {/each}
</div>

<button on:click={addPhoto}>Add Photo</button>
```

### With Event Handlers

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import type { VistaData, VistaView } from 'vistaview';
  import 'vistaview/style.css';

  const handleOpen = (vistaView: VistaView) => {
    console.log('Gallery opened');
  };

  const handleClose = (vistaView: VistaView) => {
    console.log('Gallery closed');
  };

  const handleImageView = (data: VistaData, vistaView: VistaView) => {
    console.log(`Viewing image ${data.index.to + 1}`);
  };

  const options = {
    selector: '> a',
    onOpen: handleOpen,
    onClose: handleClose,
    onImageView: handleImageView,
  };
</script>

<div use:createVistaView={options}>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="/images/photo2-full.jpg">
    <img src="/images/photo2-thumb.jpg" alt="Photo 2" />
  </a>
</div>
```

### With Custom ID and Classes

```svelte
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import 'vistaview/style.css';
</script>

<div 
  id="my-gallery"
  class="custom-gallery"
  use:createVistaView={{ 
    id: 'my-gallery',
    selector: '> a',
  }}
>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
  <a href="/images/photo2-full.jpg">
    <img src="/images/photo2-thumb.jpg" alt="Photo 2" />
  </a>
</div>

<style>
  .custom-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }
</style>
```

## TypeScript Support

VistaView is written in TypeScript and provides full type definitions:

```svelte
<script lang="ts">
  import type { VistaInterface, VistaViewProps } from 'vistaview/svelte';
  import { createVistaView } from 'vistaview/svelte';

  interface Photo {
    full: string;
    thumb: string;
    alt: string;
  }

  export let photos: Photo[];
  export let vistaOptions: Partial<VistaViewProps> = {};

  let vista: VistaInterface;
</script>

<div use:createVistaView={{ ...vistaOptions, selector: '> a', ref: vista }}>
  {#each photos as photo, i (i)}
    <a href={photo.full}>
      <img src={photo.thumb} alt={photo.alt} />
    </a>
  {/each}
</div>
```

## SvelteKit Considerations

When using VistaView with SvelteKit, ensure you import it only on the client side:

```svelte
<script lang="ts">
  import { onMount } from 'svelte';
  import { browser } from '$app/environment';

  let vistaView: any;

  onMount(async () => {
    if (browser) {
      const module = await import('vistaview/svelte');
      vistaView = module.createVistaView;
    }
  });
</script>

{#if browser && vistaView}
  <div use:vistaView={{ selector: '> a' }}>
    <a href="/images/photo1-full.jpg">
      <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
    </a>
  </div>
{/if}
```

Or use client-side only rendering:

```svelte
<!-- +page.svelte -->
<script lang="ts">
  import Gallery from './Gallery.svelte';
</script>

<Gallery />
```

```svelte
<!-- Gallery.svelte -->
<script lang="ts">
  import { createVistaView } from 'vistaview/svelte';
  import 'vistaview/style.css';
</script>

<svelte:head>
  <script type="module">
    // Ensure client-side only
  </script>
</svelte:head>

<div use:createVistaView={{ selector: '> a' }}>
  <a href="/images/photo1-full.jpg">
    <img src="/images/photo1-thumb.jpg" alt="Photo 1" />
  </a>
</div>
```

## Next Steps

- Learn about [configuration options](/concepts/configuration)
- Explore [extensions](/concepts/extensions)
- Customize with [themes and styling](/concepts/styling)
