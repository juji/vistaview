
<section class="extensions-section">
	<div>
		<h2>Extensions</h2>
		<p>
			Extend VistaView's functionality with powerful extensions. From video support to interactive controls, extensions let you customize your image galleries to fit your specific needs.
		</p>
		<p><a href="/extensions/overview/">Learn more about extensions â†’</a></p>

		<div class="extensions-grid">
			<div class="extension-card">
				<h3>Video Support</h3>
				<p>Embed videos from popular platforms directly in your galleries. Supports <a href="/extensions/youtube-video"><strong>YouTube</strong></a>, <a href="/extensions/vimeo-video"><strong>Vimeo</strong></a>, <a href="/extensions/dailymotion-video"><strong>Dailymotion</strong></a>, <a href="/extensions/wistia-video"><strong>Wistia</strong></a>, <a href="/extensions/vidyard-video"><strong>Vidyard</strong></a>, and <a href="/extensions/streamable-video"><strong>Streamable</strong></a>.</p>
			</div>

			<div class="extension-card">
				<h3>Interactive Controls & Advanced Features</h3>
				<p>Add custom controls and user interactions to your galleries. Includes <a href="/extensions/download"><strong>Download</strong></a> for saving images, <a href="/extensions/logger"><strong>Logger</strong></a> for debug information, and <a href="/extensions/image-story"><strong>Image Story</strong></a> for extended information about your image.</p>
			</div>

			<div class="extension-card">
				<h3>Maps Integration</h3>
				<p>Display interactive maps in your image galleries. Integrates with <a href="/extensions/google-maps"><strong>Google Maps</strong></a>, <a href="/extensions/mapbox"><strong>Mapbox</strong></a>, and <a href="/extensions/openstreetmap"><strong>OpenStreetMap</strong></a>.</p>
			</div>
		</div>

		</div>
	</div>
	<div>
		<div class="extensions-demo">
			<div class="extensions-gallery">
				<a href="https://picsum.photos/seed/demo1/800/600" target="_blank" rel="noopener" class="gallery-link">
					<img src="https://picsum.photos/seed/demo1/400/300" alt="Demo image with extensions" />
				</a>
				<a href="https://picsum.photos/seed/demo2/800/600" target="_blank" rel="noopener" class="gallery-link">
					<img src="https://picsum.photos/seed/demo2/400/300" alt="Another demo image" />
				</a>
        <a href="https://picsum.photos/seed/demo3/800/600" target="_blank" rel="noopener" class="gallery-link">
					<img src="https://picsum.photos/seed/demo3/400/300" alt="Another demo image" />
				</a>
			</div>
		</div>
	</div>


</section>


<script>
  import { vistaView } from 'vistaview';
  import { logger } from 'vistaview/extensions/logger';
  import { download } from 'vistaview/extensions/download';
  import { imageStory } from 'vistaview/extensions/image-story';
  import { youtubeVideo, getYouTubeThumbnail } from 'vistaview/extensions/youtube-video';
  import { dailymotionVideo, getDailymotionThumbnail } from 'vistaview/extensions/dailymotion-video';
  import { vimeoVideo, getVimeoThumbnail } from 'vistaview/extensions/vimeo-video';
  import { wistiaVideo, getWistiaThumbnail } from 'vistaview/extensions/wistia-video';
  import { vidyardVideo, getVidyardThumbnail } from 'vistaview/extensions/vidyard-video';
  import { streamableVideo, getStreamableThumbnail } from 'vistaview/extensions/streamable-video';
  import { googleMaps } from 'vistaview/extensions/google-maps';
  import { mapbox } from 'vistaview/extensions/mapbox';
  import { openStreetMap } from 'vistaview/extensions/openstreetmap';
  import 'vistaview/style.css';
  import 'vistaview/styles/extensions/image-story.css';
	const googleMapsApiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY || null;
	const mapboxAccessToken = import.meta.env.PUBLIC_MAPBOX_ACCESS_TOKEN || null;

	console.log('Google Maps API Key:', googleMapsApiKey);
	console.log('Mapbox Access Token:', mapboxAccessToken);

  (async () => {
    console.log('Loading video thumbnails for extensions demo...');

    const videoUrl = 'https://www.youtube.com/watch?v=GwJrZBe8JX4';
    const thumbnailUrl = getYouTubeThumbnail(videoUrl, 'hq');

    const dailimotionVideoUrl = 'https://www.dailymotion.com/video/x7xvssw';
    const dailymotionThumbnailUrl = getDailymotionThumbnail(dailimotionVideoUrl);

    const vimeoVideoUrl = 'https://vimeo.com/30673387';
    const vimeoThumbnailUrl = getVimeoThumbnail(vimeoVideoUrl);

    const wistiaVideoUrl = 'https://jujiyangasli.wistia.com/medias/5tel0p2wua';
    const wistiaThumbnailUrl = await getWistiaThumbnail(wistiaVideoUrl);

    const vidyardVideoUrl = 'https://share.vidyard.com/watch/GRJFiCEc9uSqJELta26in3';
    const vidyardThumbnailUrl = getVidyardThumbnail(vidyardVideoUrl);

    const streamableVideoUrl = 'https://streamable.com/0skbol';
    const streamableThumbnailUrl = getStreamableThumbnail(streamableVideoUrl);

    const googleMapsUrl = 'https://www.google.com/maps/@40.7128,-74.0060,15z';
    const googleMapsLocation = { lat: 40.7128, lng: -74.0060, zoom: 15 };
    const googleMapsThumbnail = googleMapsApiKey
      ? await (await import('vistaview/extensions/google-maps')).getGoogleMapsStaticImage(googleMapsLocation, { apiKey: googleMapsApiKey, zoom: 15 })
      : 'https://via.placeholder.com/400x300?text=Google+Maps+%28API+Key+Required%29';

    const mapboxUrl = 'mapbox://-74.0060,40.7128,15';
    const mapboxLocation = { lng: -74.0060, lat: 40.7128, zoom: 15 };
    const mapboxThumbnail = mapboxAccessToken
      ? await (await import('vistaview/extensions/mapbox')).getMapboxStaticImage(mapboxLocation, { accessToken: mapboxAccessToken, zoom: 15 })
      : 'https://via.placeholder.com/400x300?text=Mapbox+%28Access+Token+Required%29';

    const osmUrl = 'https://www.openstreetmap.org/#map=15/40.7128/-74.0060';
    const osmLocation = { lat: 40.7128, lng: -74.0060, zoom: 15 };
    const osmThumbnail = (await import('vistaview/extensions/openstreetmap')).getOpenStreetMapStaticImage(osmLocation, { zoom: 15 });

    const gallery = document.querySelector('.extensions-gallery');
    function addThumbToGallery(url, thumbnail, alt, className) {
      const link = document.createElement('a');
      link.href = url;
      link.target = '_blank';
      link.rel = 'noopener';
      link.classList.add(className);
      const img = document.createElement('img');
      img.src = thumbnail;
      img.alt = alt;
      link.appendChild(img);
      gallery.appendChild(link);
    }

    addThumbToGallery(videoUrl, thumbnailUrl, 'YouTube video', 'gallery-link');
    addThumbToGallery(dailimotionVideoUrl, dailymotionThumbnailUrl, 'Dailymotion video', 'gallery-link');
    addThumbToGallery(vimeoVideoUrl, vimeoThumbnailUrl, 'Vimeo video', 'gallery-link');
    addThumbToGallery(wistiaVideoUrl, wistiaThumbnailUrl, 'Wistia video', 'gallery-link');
    addThumbToGallery(vidyardVideoUrl, vidyardThumbnailUrl, 'Vidyard video', 'gallery-link');
    addThumbToGallery(streamableVideoUrl, streamableThumbnailUrl, 'Streamable video', 'gallery-link');
    addThumbToGallery(googleMapsUrl, googleMapsThumbnail, 'Google Maps location', 'gallery-link');
    addThumbToGallery(mapboxUrl, mapboxThumbnail, 'Mapbox location', 'gallery-link');
    addThumbToGallery(osmUrl, osmThumbnail, 'OpenStreetMap location', 'gallery-link');

    vistaView({ 
      elements: '.extensions-gallery a',
      controls: {
        topRight: ['zoomIn', 'zoomOut',  'download', 'close'],
        bottomCenter: ['imageStory'],
      },
      extensions: [
        logger(),
        download(),
        imageStory({
          getStory: async (index) => ({
            content: `
              <p style="margin-top: 0">This is a description for image #${index + 1}. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
              <p>This is some additional random text for the image story. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
              <p>More random content: Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident.</p>
              <p style="margin-bottom: 0">end of story.</p>
              `,
            onLoad: () => {
              console.log(`Story for image #${index + 1} loaded.`);
            },
            onUnload: () => {
              console.log(`Story for image #${index + 1} unloaded.`);
            },
          })
        }),
        youtubeVideo(),
        dailymotionVideo(),
        vimeoVideo(),
        wistiaVideo(),
        vidyardVideo(),
        streamableVideo(),
        googleMaps({ apiKey: googleMapsApiKey }),
        mapbox({ accessToken: mapboxAccessToken }),
        openStreetMap()
      ]
    });

  })();
</script>

<style is:global>
  a.gallery-link {
		display: block;
		border-radius: 0.25rem;
		overflow: hidden;
		transition: transform 0.2s ease;
    height: 120px;
	}

  a.gallery-link:hover {
		transform: scale(1.05);
	}

  .extensions-gallery {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
		gap: 1rem;
	}

	.extensions-gallery img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
	}
</style>

<style>
	.extensions-section {
		padding: 2rem 0;
		text-align: start;

		@media screen and (min-width: 50rem) {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 2rem;
		}
	}

	.extensions-section h2 {
		font-size: var(--sl-text-2xl);
		margin-bottom: 1rem;
	}

	.extensions-section p {
		max-width: 60ch;
		margin: 0 0 2rem 0;
		color: var(--sl-color-gray-2);
	}

	.extensions-grid {
		margin-bottom: 3rem;
	}

	.extension-card {
		margin-bottom: 2rem;
	}

	.extension-card h3 {
		font-size: var(--sl-text-lg);
		margin: 0 0 0.5rem 0;
		color: var(--sl-color-text);
	}

	.extension-card strong {
		color: #22c55e;
		font-weight: 600;
	}

	.extension-card a {
		text-decoration: none;
		transition: opacity 0.2s ease;
	}

	.extension-card a:hover {
		opacity: 0.8;
	}

	.extension-card p {
		margin: 0 0 1rem 0;
		color: var(--sl-color-gray-3);
		font-size: var(--sl-text-sm);
	}

	.extensions-demo {
		padding: 0;
	}
</style>